<!DOCTYPE HTML>
<html>
<head>
  <script src="./main.js"></script>
  <script src="./polyfill.min.js"></script>
</head>
<body>
  <h1>KWebBrew - Web-Based Homebrew System</h1>
  <a href="file:///mnt/us/documents/Apps/index.html">Open This Document</a>
  <br />
  <a href="file:////">Open Root Directory</a>
  <br />
  <p>Local Link:</p>
  <img src="./test.png">

  <p>Iframe Source:</p>
  <input placeholder="enter path" id="textInput">
  <button onclick="getSource()">get source</button>
  <p id="sourcesource"></p>
  <br />
  <br />
  <button onclick="getDirStuff()">CLICK TO DIR</button>
  <p id="directory"></p>

  <script>
    function getDirStuff() {
      fetchData("../").then(function (data) {
        const tagReg = new RegExp('<a(\n|.)*?(?=<\/a>)', "gim");
        const hrefReg = new RegExp('href="(\n|.)*?(?=")', 'gim');
        const tagRemovalReg = new RegExp('<a(\n|.)*?>', 'gim');

        const anchorTags = Array.from(data.matchAll(tagReg));

        for (var i=0; i < anchorTags.length; i++) {
          const source = Array.from(anchorTags[i][0].matchAll(hrefReg));

          const p = document.createElement("p");
          p.innerText = anchorTags[i][0].replace(tagRemovalReg, '') + " - " + source[0][0].substring(6);

          document.getElementById("directory").appendChild(p);
        }
      });
    }
  </script>
</body>
</html>